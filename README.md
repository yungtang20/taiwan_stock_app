# å°ç£è‚¡ç¥¨åˆ†æ Android APP

åŸºæ–¼ Flutter é–‹ç™¼çš„å°ç£è‚¡ç¥¨æŠ€è¡“åˆ†ææ‡‰ç”¨ç¨‹å¼ï¼Œæ•´åˆ Supabase é›²ç«¯æœå‹™ï¼Œæä¾›å³æ™‚è‚¡ç¥¨æ•¸æ“šæŸ¥è©¢ã€æŠ€è¡“æŒ‡æ¨™åˆ†æå’Œäº¤æ˜“è¨Šè™Ÿæƒæã€‚

## åŠŸèƒ½ç‰¹è‰²

### ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

1. **è‚¡ç¥¨åˆ—è¡¨**
   - é¡¯ç¤º 1800+ å°ç£ä¸Šå¸‚æ«ƒè‚¡ç¥¨
   - å³æ™‚æœå°‹è‚¡ç¥¨ä»£ç¢¼/åç¨±
   - å¤šç¨®æ’åºæ–¹å¼ (ä»£ç¢¼ã€æ¼²å¹…ã€MFIã€è³ºè³ æ¯”)
   - ä¸‹æ‹‰åˆ·æ–°æ›´æ–°æ•¸æ“š

2. **å–®æª”è©³æƒ…**
   - å®Œæ•´çš„è‚¡ç¥¨è³‡è¨Šå±•ç¤º
   - æœ€æ–°å ±åƒ¹ (é–‹ã€é«˜ã€ä½ã€æ”¶ã€é‡)
   - æŠ€è¡“æŒ‡æ¨™ (MFI14ã€MA5/10/20/60/200)
   - VP äº¤æ˜“è¨Šè™Ÿ (è²·å…¥åƒ¹ã€åœæåƒ¹ã€è³£å‡ºåƒ¹ã€è³ºè³ æ¯”)
   - æ­·å²æ•¸æ“šè¡¨æ ¼ (æœ€è¿‘ 60 å¤©)

3. **å¤šé ­æƒæ**
   - è‡ªå‹•ç¯©é¸è³ºè³ æ¯” > 3.0 çš„å¤šé ­æ©Ÿæœƒ
   - æŒ‰è³ºè³ æ¯”æ’åº
   - ä¸€éµæŸ¥çœ‹è©³æƒ…

4. **ç©ºé ­æƒæ**
   - é¡¯ç¤ºç©ºé ­è¨Šè™Ÿè‚¡ç¥¨
   - é¢¨éšªæç¤º

5. **æŠ€è¡“æŒ‡æ¨™ç¯©é¸**
   - MFI ç¯„åœç¯©é¸ (0-100)
   - åƒ¹æ ¼ç¯„åœç¯©é¸
   - è¨Šè™Ÿé¡å‹ç¯©é¸ (å¤šé ­/ç©ºé ­/ä¸­æ€§)
   - å¤šæ¢ä»¶çµ„åˆæŸ¥è©¢

6. **è¨­ç½®ç®¡ç†**
   - Supabase é€£æ¥æ¸¬è©¦
   - æœ¬åœ°å¿«å–ç®¡ç†
   - å¿«å–æ¸…é™¤åŠŸèƒ½
   - æ‡‰ç”¨è³‡è¨Š

### ğŸ¨ UI è¨­è¨ˆ

- **Material Design 3** è¨­è¨ˆé¢¨æ ¼
- **å°ç£è‚¡å¸‚é…è‰²**ï¼šç´…æ¼²ç¶ è·Œ
- **éŸ¿æ‡‰å¼ä½ˆå±€**ï¼šé©é…å„ç¨®è¢å¹•å°ºå¯¸
- **æµæš¢å‹•ç•«**ï¼šæå‡ä½¿ç”¨é«”é©—
- **é›¢ç·šå„ªå…ˆ**ï¼šæœ¬åœ°å¿«å–æ”¯æ´é›¢ç·šæŸ¥çœ‹

### ğŸ”§ æŠ€è¡“æŒ‡æ¨™èªªæ˜

#### MFI (Money Flow Index)
- 14 æ—¥è³‡é‡‘æµé‡æŒ‡æ¨™
- ç¯„åœï¼š0-100
- è¶…è²·ï¼š> 80
- è¶…è³£ï¼š< 20

#### VP è¨Šè™Ÿ (Value Position)
- **è²·å…¥åƒ¹**ï¼šè¿‘ 20 æ—¥æœ€ä½åƒ¹ (æ”¯æ’ä½)
- **è³£å‡ºåƒ¹**ï¼šè¿‘ 20 æ—¥æœ€é«˜åƒ¹ (å£“åŠ›ä½)
- **åœæåƒ¹**ï¼šè²·å…¥ - (è²·å…¥ - æœ€ä½) Ã— 0.5
- **è³ºè³ æ¯”**ï¼š(è³£å‡º - è²·å…¥) / (è²·å…¥ - åœæ)

#### ç§»å‹•å¹³å‡ç·š (MA)
- MA5ï¼š5 æ—¥ç§»å‹•å¹³å‡
- MA10ï¼š10 æ—¥ç§»å‹•å¹³å‡
- MA20ï¼š20 æ—¥ç§»å‹•å¹³å‡
- MA60ï¼š60 æ—¥ç§»å‹•å¹³å‡
- MA200ï¼š200 æ—¥ç§»å‹•å¹³å‡

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯
- **æ¡†æ¶**ï¼šFlutter 3.x
- **èªè¨€**ï¼šDart
- **ç‹€æ…‹ç®¡ç†**ï¼šProvider
- **æœ¬åœ°å¿«å–**ï¼šHive
- **åœ–è¡¨åº«**ï¼šfl_chart (é ç•™ï¼Œæœªå¯¦ä½œ)
- **UI çµ„ä»¶**ï¼šMaterial Design 3

### å¾Œç«¯
- **é›²ç«¯æœå‹™**ï¼šSupabase
- **è³‡æ–™åº«**ï¼šPostgreSQL
- **API**ï¼šSupabase REST API
- **èªè­‰**ï¼šSupabase Auth (é ç•™)

### æ•¸æ“šä¾†æº
- **Python çˆ¬èŸ²**ï¼šå®šæ™‚çˆ¬å– TWSE/TPEX æ•¸æ“š
- **FinMind API**ï¼šå°ç£è‚¡ç¥¨æ­·å²æ•¸æ“š
- **å®˜æ–¹ API**ï¼šå°ç£è­‰åˆ¸äº¤æ˜“æ‰€ã€æ«ƒè²·ä¸­å¿ƒ

## å®‰è£èˆ‡ä½¿ç”¨

### å‰ç½®éœ€æ±‚

1. **Flutter SDK** (>= 3.0.0)
   ```bash
   flutter --version
   ```

2. **Android Studio** æˆ– **VS Code**
   - Android SDK
   - Android Emulator æˆ–å¯¦é«”æ‰‹æ©Ÿ

3. **Supabase å°ˆæ¡ˆ**
   - å·²é…ç½®çš„ Supabase è³‡æ–™åº«
   - åŸ·è¡Œ `supabase_schema.sql` å»ºç«‹è³‡æ–™è¡¨

### å®‰è£æ­¥é©Ÿ

1. **Clone å°ˆæ¡ˆ**
   ```bash
   cd taiwan_stock_app
   ```

2. **å®‰è£ä¾è³´**
   ```bash
   flutter pub get
   ```

3. **é…ç½® Supabase**
   
   ç·¨è¼¯ `lib/config/supabase_config.dart`ï¼Œå¡«å…¥æ‚¨çš„ Supabase å°ˆæ¡ˆè³‡è¨Šï¼š
   ```dart
   static const String supabaseUrl = 'YOUR_SUPABASE_URL';
   static const String supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
   ```

4. **åŸ·è¡Œæ‡‰ç”¨**
   ```bash
   # åœ¨æ¨¡æ“¬å™¨æˆ–å¯¦é«”æ‰‹æ©Ÿä¸ŠåŸ·è¡Œ
   flutter run
   
   # æˆ–æŒ‡å®šè¨­å‚™
   flutter devices
   flutter run -d <device_id>
   ```

5. **æ‰“åŒ… APK**
   ```bash
   # Release ç‰ˆæœ¬
   flutter build apk --release
   
   # APK ä½ç½®
   # build/app/outputs/flutter-apk/app-release.apk
   ```

### å®‰è£åˆ°æ‰‹æ©Ÿ

1. å°‡ `app-release.apk` å‚³è¼¸åˆ° Android æ‰‹æ©Ÿ
2. é–‹å•Ÿã€ŒæœªçŸ¥ä¾†æºã€å®‰è£æ¬Šé™
3. é»æ“Š APK æª”æ¡ˆå®‰è£

## Supabase è³‡æ–™åº«è¨­å®š

### å»ºç«‹è³‡æ–™è¡¨

åœ¨ Supabase SQL Editor åŸ·è¡Œ `supabase_schema.sql`ï¼š

```sql
-- 1. stocks (è‚¡ç¥¨æ¸…å–®)
-- 2. stock_daily_data (æ¯æ—¥æ•¸æ“š)
-- 3. technical_indicators (æŠ€è¡“æŒ‡æ¨™)
-- 4. vp_signals (VP è¨Šè™Ÿ)
-- 5. latest_stock_data (è¦–åœ–)
-- 6. bullish_opportunities (è¦–åœ–)
-- 7. bearish_opportunities (è¦–åœ–)
-- 8. get_stock_history() (å‡½æ•¸)
-- 9. search_stocks() (å‡½æ•¸)
```

### è¨­å®š RLS (Row Level Security)

æ‰€æœ‰è³‡æ–™è¡¨å·²å•Ÿç”¨ RLSï¼Œä¸¦å…è¨±åŒ¿åè®€å–ï¼š

```sql
CREATE POLICY "Allow public read access on stocks"
ON stocks FOR SELECT TO anon USING (true);
```

### Python çˆ¬èŸ²è¨­å®š

ä½¿ç”¨æä¾›çš„ `taiwan_stock_v24_1_final.py` å®šæ™‚åŸ·è¡Œï¼š

1. ä¿®æ”¹çˆ¬èŸ²ç¨‹å¼ï¼Œå°‡æ•¸æ“šä¸Šå‚³åˆ° Supabase
2. è¨­å®š Cron Job æˆ– Windows è¨ˆåŠƒä»»å‹™
3. å»ºè­°æ¯æ—¥æ”¶ç›¤å¾ŒåŸ·è¡Œ (æ™šä¸Š 9 é»)

## å°ˆæ¡ˆçµæ§‹

```
taiwan_stock_app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                      # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ supabase_config.dart       # Supabase é…ç½®
â”‚   â”œâ”€â”€ models/                        # æ•¸æ“šæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ stock.dart
â”‚   â”‚   â”œâ”€â”€ stock_daily_data.dart
â”‚   â”‚   â”œâ”€â”€ technical_indicator.dart
â”‚   â”‚   â”œâ”€â”€ vp_signal.dart
â”‚   â”‚   â””â”€â”€ latest_stock_data.dart
â”‚   â”œâ”€â”€ services/                      # æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ supabase_service.dart
â”‚   â”‚   â””â”€â”€ cache_service.dart
â”‚   â”œâ”€â”€ providers/                     # ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ stock_provider.dart
â”‚   â”œâ”€â”€ screens/                       # é é¢
â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â”œâ”€â”€ stock_detail_screen.dart
â”‚   â”‚   â”œâ”€â”€ bullish_screen.dart
â”‚   â”‚   â”œâ”€â”€ bearish_screen.dart
â”‚   â”‚   â”œâ”€â”€ filter_screen.dart
â”‚   â”‚   â””â”€â”€ settings_screen.dart
â”‚   â”œâ”€â”€ widgets/                       # çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ stock_list_item.dart
â”‚   â”‚   â””â”€â”€ search_bar_widget.dart
â”‚   â””â”€â”€ utils/                         # å·¥å…·é¡
â”‚       â”œâ”€â”€ colors.dart
â”‚       â”œâ”€â”€ constants.dart
â”‚       â””â”€â”€ formatters.dart
â”œâ”€â”€ android/                           # Android é…ç½®
â”œâ”€â”€ pubspec.yaml                       # ä¾è³´é…ç½®
â””â”€â”€ README.md                          # èªªæ˜æ–‡ä»¶
```

## å¿«å–ç­–ç•¥

### å¿«å–æœ‰æ•ˆæœŸ

- **è‚¡ç¥¨åˆ—è¡¨**ï¼š24 å°æ™‚
- **æ­·å²æ•¸æ“š**ï¼š1 å°æ™‚
- **å¤šé ­/ç©ºé ­æ©Ÿæœƒ**ï¼š30 åˆ†é˜

### å¿«å–ç®¡ç†

åœ¨ã€Œè¨­ç½®ã€é é¢å¯ä»¥ï¼š
- æŸ¥çœ‹å¿«å–å¤§å°
- æ¸…é™¤æ‰€æœ‰å¿«å–
- å¼·åˆ¶åˆ·æ–°æ•¸æ“š

## å¸¸è¦‹å•é¡Œ

### Q1: ç„¡æ³•é€£æ¥ Supabaseï¼Ÿ

**A:** æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
1. Supabase URL å’Œ API Key æ˜¯å¦æ­£ç¢º
2. ç¶²è·¯é€£æ¥æ˜¯å¦æ­£å¸¸
3. Supabase å°ˆæ¡ˆæ˜¯å¦å•Ÿç”¨
4. RLS æ”¿ç­–æ˜¯å¦æ­£ç¢ºè¨­å®š

### Q2: è‚¡ç¥¨åˆ—è¡¨ç‚ºç©ºï¼Ÿ

**A:** å¯èƒ½åŸå› ï¼š
1. Supabase è³‡æ–™åº«å°šæœªåŒ¯å…¥æ•¸æ“š
2. Python çˆ¬èŸ²å°šæœªåŸ·è¡Œ
3. ç¶²è·¯é€£æ¥å•é¡Œ

è§£æ±ºæ–¹æ³•ï¼š
1. åŸ·è¡Œ Python çˆ¬èŸ²åŒ¯å…¥æ•¸æ“š
2. æª¢æŸ¥ Supabase è³‡æ–™è¡¨æ˜¯å¦æœ‰æ•¸æ“š
3. åœ¨ã€Œè¨­ç½®ã€é é¢æ¸¬è©¦é€£æ¥

### Q3: å¦‚ä½•æ›´æ–°æ•¸æ“šï¼Ÿ

**A:** 
1. åœ¨é¦–é ä¸‹æ‹‰åˆ·æ–°
2. é»æ“Šå³ä¸Šè§’åˆ·æ–°æŒ‰éˆ•
3. è¨­å®š Python çˆ¬èŸ²å®šæ™‚åŸ·è¡Œ

### Q4: APK å®‰è£å¤±æ•—ï¼Ÿ

**A:**
1. é–‹å•Ÿã€ŒæœªçŸ¥ä¾†æºã€å®‰è£æ¬Šé™
2. æª¢æŸ¥ Android ç‰ˆæœ¬ (å»ºè­° Android 5.0+)
3. æ¸…é™¤èˆŠç‰ˆæœ¬å¾Œé‡æ–°å®‰è£

## é–‹ç™¼è¨ˆåŠƒ

### å·²å®Œæˆ âœ…

- [x] åŸºç¤æ¶æ§‹è¨­è¨ˆ
- [x] Supabase æ•´åˆ
- [x] è‚¡ç¥¨åˆ—è¡¨é é¢
- [x] å–®æª”è©³æƒ…é é¢
- [x] å¤šé ­/ç©ºé ­æƒæ
- [x] æŠ€è¡“æŒ‡æ¨™ç¯©é¸
- [x] æœ¬åœ°å¿«å–
- [x] è¨­ç½®é é¢

### å¾…é–‹ç™¼ ğŸš§

- [ ] K ç·šåœ–è¡¨ (ä½¿ç”¨ fl_chart)
- [ ] æŠ€è¡“æŒ‡æ¨™åœ–è¡¨
- [ ] è‡ªé¸è‚¡åŠŸèƒ½
- [ ] åƒ¹æ ¼æé†’
- [ ] æ·±è‰²æ¨¡å¼
- [ ] æ›´å¤šæŠ€è¡“æŒ‡æ¨™ (KDã€MACDã€RSI)

## æˆæ¬Š

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸ç¿’å’Œå€‹äººä½¿ç”¨ï¼Œä¸å¾—ç”¨æ–¼å•†æ¥­ç”¨é€”ã€‚

## å…è²¬è²æ˜

æœ¬æ‡‰ç”¨æä¾›çš„è‚¡ç¥¨æ•¸æ“šå’ŒæŠ€è¡“æŒ‡æ¨™åƒ…ä¾›åƒè€ƒï¼Œä¸æ§‹æˆæŠ•è³‡å»ºè­°ã€‚æŠ•è³‡æœ‰é¢¨éšªï¼Œè«‹è¬¹æ…è©•ä¼°ã€‚

## è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿è¯ç¹«ã€‚

---

**é–‹ç™¼è€…**: Manus AI Assistant  
**ç‰ˆæœ¬**: 1.0.0  
**æœ€å¾Œæ›´æ–°**: 2025-10-30
